# ğŸ“ AIç‹¼äººæ€ - é¡¹ç›®ç»“æ„

## ğŸŒ³ å®Œæ•´ç›®å½•æ ‘

```
ai-werewolf/                        # é¡¹ç›®æ ¹ç›®å½•
â”‚
â”œâ”€â”€ ğŸ“„ main.py                      # ä¸»ç¨‹åºå…¥å£ï¼ˆå¾…å®ç°ï¼‰
â”œâ”€â”€ ğŸ“„ requirements.txt             # Pythonä¾èµ–
â”œâ”€â”€ ğŸ“„ .env                         # ç¯å¢ƒå˜é‡é…ç½®
â”œâ”€â”€ ğŸ“„ .gitignore                   # Gitå¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ ğŸ“„ .gitattributes               # Gitå±æ€§é…ç½®
â”‚
â”œâ”€â”€ ğŸ“š æ–‡æ¡£
â”‚   â”œâ”€â”€ README.md                   # é¡¹ç›®è¯´æ˜
â”‚   â”œâ”€â”€ ARCHITECTURE.md             # æ¶æ„æ–‡æ¡£
â”‚   â”œâ”€â”€ PROJECT_STRUCTURE.md        # é¡¹ç›®ç»“æ„ï¼ˆæœ¬æ–‡ä»¶ï¼‰
â”‚   â”œâ”€â”€ CONDA_SETUP.md              # Condaé…ç½®
â”‚   â”œâ”€â”€ MODELSCOPE_GUIDE.md         # ModelScopeæŒ‡å—
â”‚   â”œâ”€â”€ LANGCHAIN_SETUP.md          # LangChainé…ç½®
â”‚   â”œâ”€â”€ AIç‹¼äººæ€äº§å“è®¾è®¡æ–¹æ¡ˆ.md     # äº§å“è®¾è®¡
â”‚   â”œâ”€â”€ ç‹¼äººæ€ç»å…¸ç©æ³•è°ƒç ”.md       # æ¸¸æˆè§„åˆ™
â”‚   â”œâ”€â”€ æ ¸å¿ƒå†³ç­–æŒ‡å—.md             # æ ¸å¿ƒå†³ç­–
â”‚   â””â”€â”€ é¡¹ç›®æ–‡ä»¶è¯´æ˜.md             # æ–‡ä»¶è¯´æ˜
â”‚
â”œâ”€â”€ ğŸ“‚ src/                         # æºä»£ç æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ® core/                    # æ ¸å¿ƒæ¸¸æˆé€»è¾‘
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ models.py               # æ•°æ®æ¨¡å‹ (Player, GameState, Role)
â”‚   â”‚   â”œâ”€â”€ game_engine.py          # æ¸¸æˆå¼•æ“ (WerewolfGame)
â”‚   â”‚   â””â”€â”€ event_system.py         # äº‹ä»¶ç³»ç»Ÿ (EventSystem, GameEvent)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ¤– agents/                  # AI Agentæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ base_agent.py           # AgentåŸºç±» (BaseAgent)
â”‚   â”‚   â”œâ”€â”€ langchain_agent.py      # LangChainå®ç° (LangChainAgent)
â”‚   â”‚   â””â”€â”€ agent_factory.py        # Agentå·¥å‚ (AgentFactory)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ’¾ database/                # æ•°æ®åº“æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ base_db.py              # æ•°æ®åº“åŸºç±» (BaseDatabase)
â”‚   â”‚   â”œâ”€â”€ vector_db.py            # å‘é‡æ•°æ®åº“ (VectorDatabase)
â”‚   â”‚   â”œâ”€â”€ cache_db.py             # ç¼“å­˜æ•°æ®åº“ (CacheDatabase)
â”‚   â”‚   â””â”€â”€ game_repository.py      # æ¸¸æˆä»“åº“ (GameRepository)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸŒ web/                     # WebæœåŠ¡æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ api.py                  # FastAPIåº”ç”¨ (create_app)
â”‚   â”‚   â””â”€â”€ websocket.py            # WebSocketç®¡ç† (WebSocketManager)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ¬ video/                   # è§†é¢‘ç”Ÿæˆæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ video_generator.py      # è§†é¢‘ç”Ÿæˆå™¨ (VideoGenerator)
â”‚   â”‚   â”œâ”€â”€ effects.py              # ç‰¹æ•ˆæ¸²æŸ“ (EffectRenderer)
â”‚   â”‚   â””â”€â”€ timeline.py             # æ—¶é—´è½´ (Timeline)
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ› ï¸ utils/                   # å·¥å…·æ¨¡å—
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ config.py               # é…ç½®ç®¡ç† (Config, get_config)
â”‚       â””â”€â”€ logger.py               # æ—¥å¿—æ¨¡å— (setup_logger, GameLogger)
â”‚
â”œâ”€â”€ ğŸ“‚ data/                        # æ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ vector_db/                  # å‘é‡æ•°æ®åº“æ•°æ®
â”‚   â”‚   â””â”€â”€ .gitkeep
â”‚   â”œâ”€â”€ cache/                      # ç¼“å­˜æ•°æ®
â”‚   â”‚   â””â”€â”€ .gitkeep
â”‚   â”œâ”€â”€ games/                      # æ¸¸æˆè®°å½•
â”‚   â”‚   â””â”€â”€ .gitkeep
â”‚   â”œâ”€â”€ replays/                    # æ¸¸æˆå›æ”¾
â”‚   â”‚   â””â”€â”€ .gitkeep
â”‚   â””â”€â”€ logs/                       # æ—¥å¿—æ–‡ä»¶
â”‚       â””â”€â”€ .gitkeep
â”‚
â”œâ”€â”€ ğŸ“‚ assets/                      # èµ„æºæ–‡ä»¶
â”‚   â”œâ”€â”€ images/                     # å›¾ç‰‡èµ„æº
â”‚   â”‚   â””â”€â”€ .gitkeep
â”‚   â”œâ”€â”€ audio/                      # éŸ³é¢‘èµ„æº
â”‚   â”‚   â””â”€â”€ .gitkeep
â”‚   â””â”€â”€ effects/                    # ç‰¹æ•ˆèµ„æº
â”‚       â””â”€â”€ .gitkeep
â”‚
â”œâ”€â”€ ğŸ“‚ output/                      # è¾“å‡ºç›®å½•
â”‚   â”œâ”€â”€ videos/                     # ç”Ÿæˆçš„è§†é¢‘
â”‚   â”‚   â””â”€â”€ .gitkeep
â”‚   â””â”€â”€ screenshots/                # æˆªå›¾
â”‚       â””â”€â”€ .gitkeep
â”‚
â”œâ”€â”€ ğŸ“‚ config/                      # é…ç½®æ–‡ä»¶ç›®å½•
â”‚   â””â”€â”€ default.json                # é»˜è®¤é…ç½®
â”‚
â”œâ”€â”€ ğŸ“‚ tests/                       # æµ‹è¯•ä»£ç ï¼ˆå¾…æ·»åŠ ï¼‰
â”‚   â”œâ”€â”€ test_core/                  # æ ¸å¿ƒæ¨¡å—æµ‹è¯•
â”‚   â”œâ”€â”€ test_agents/                # Agentæµ‹è¯•
â”‚   â””â”€â”€ test_api/                   # APIæµ‹è¯•
â”‚
â””â”€â”€ ğŸ“‚ docs/                        # é¢å¤–æ–‡æ¡£ç›®å½•
    â””â”€â”€ README.md                   # æ–‡æ¡£è¯´æ˜
```

---

## ğŸ“Š æ¨¡å—è¯´æ˜

### ğŸ® Core æ¨¡å—ï¼ˆæ ¸å¿ƒé€»è¾‘ï¼‰

| æ–‡ä»¶ | ç±»/å‡½æ•° | åŠŸèƒ½ | çŠ¶æ€ |
|------|---------|------|------|
| models.py | Player, Role, GameState, AgentMemory | æ•°æ®æ¨¡å‹å®šä¹‰ | å¾…å®ç° |
| game_engine.py | WerewolfGame | æ¸¸æˆå¼•æ“å’Œè§„åˆ™ | å¾…å®ç° |
| event_system.py | EventSystem, GameEvent | äº‹ä»¶å‘å¸ƒè®¢é˜… | å¾…å®ç° |

**æ ¸å¿ƒèŒè´£**:
- å®šä¹‰æ¸¸æˆæ•°æ®ç»“æ„
- å®ç°æ¸¸æˆè§„åˆ™å’Œæµç¨‹
- ç®¡ç†æ¸¸æˆçŠ¶æ€
- å‘å¸ƒæ¸¸æˆäº‹ä»¶

### ğŸ¤– Agents æ¨¡å—ï¼ˆAIç©å®¶ï¼‰

| æ–‡ä»¶ | ç±»/å‡½æ•° | åŠŸèƒ½ | çŠ¶æ€ |
|------|---------|------|------|
| base_agent.py | BaseAgent | AgentæŠ½è±¡åŸºç±» | å¾…å®ç° |
| langchain_agent.py | LangChainAgent | LangChainå®ç° | å¾…å®ç° |
| agent_factory.py | AgentFactory | Agentåˆ›å»ºå·¥å‚ | å¾…å®ç° |

**æ ¸å¿ƒèŒè´£**:
- å®šä¹‰Agentæ¥å£
- å®ç°AIå†³ç­–é€»è¾‘
- ç®¡ç†Agentè®°å¿†
- ä¸LLMäº¤äº’

### ğŸ’¾ Database æ¨¡å—ï¼ˆæ•°æ®å­˜å‚¨ï¼‰

| æ–‡ä»¶ | ç±»/å‡½æ•° | åŠŸèƒ½ | çŠ¶æ€ |
|------|---------|------|------|
| base_db.py | BaseDatabase | æ•°æ®åº“æ¥å£ | å¾…å®ç° |
| vector_db.py | VectorDatabase | å‘é‡æ•°æ®åº“ | å¾…å®ç° |
| cache_db.py | CacheDatabase | ç¼“å­˜æ•°æ®åº“ | å¾…å®ç° |
| game_repository.py | GameRepository | æ¸¸æˆæ•°æ®ä»“åº“ | å¾…å®ç° |

**æ ¸å¿ƒèŒè´£**:
- ç»Ÿä¸€æ•°æ®è®¿é—®æ¥å£
- æ¸¸æˆæ•°æ®æŒä¹…åŒ–
- LLMå“åº”ç¼“å­˜
- å‘é‡æœç´¢ï¼ˆè®¡åˆ’ï¼‰

### ğŸŒ Web æ¨¡å—ï¼ˆWebæœåŠ¡ï¼‰

| æ–‡ä»¶ | ç±»/å‡½æ•° | åŠŸèƒ½ | çŠ¶æ€ |
|------|---------|------|------|
| api.py | create_app, APIç«¯ç‚¹ | REST API | å¾…å®ç° |
| websocket.py | WebSocketManager | WebSocketç®¡ç† | å¾…å®ç° |

**æ ¸å¿ƒèŒè´£**:
- æä¾›REST API
- å®æ—¶çŠ¶æ€æ¨é€
- CORSå’Œè®¤è¯
- APIæ–‡æ¡£ç”Ÿæˆ

### ğŸ¬ Video æ¨¡å—ï¼ˆè§†é¢‘ç”Ÿæˆï¼‰

| æ–‡ä»¶ | ç±»/å‡½æ•° | åŠŸèƒ½ | çŠ¶æ€ |
|------|---------|------|------|
| video_generator.py | VideoGenerator | è§†é¢‘ç”Ÿæˆ | å¾…å®ç° |
| effects.py | EffectRenderer | ç‰¹æ•ˆæ¸²æŸ“ | å¾…å®ç° |
| timeline.py | Timeline | æ—¶é—´è½´ç®¡ç† | å¾…å®ç° |

**æ ¸å¿ƒèŒè´£**:
- æ¸¸æˆè§†é¢‘ç”Ÿæˆ
- ç‰¹æ•ˆåº”ç”¨
- æ—¶é—´è½´ç®¡ç†
- ç²¾å½©é›†é”¦æå–

### ğŸ› ï¸ Utils æ¨¡å—ï¼ˆå·¥å…·ï¼‰

| æ–‡ä»¶ | ç±»/å‡½æ•° | åŠŸèƒ½ | çŠ¶æ€ |
|------|---------|------|------|
| config.py | Config, get_config | é…ç½®ç®¡ç† | å¾…å®ç° |
| logger.py | setup_logger, GameLogger | æ—¥å¿—ç®¡ç† | å¾…å®ç° |

**æ ¸å¿ƒèŒè´£**:
- ç»Ÿä¸€é…ç½®ç®¡ç†
- ç¯å¢ƒå˜é‡åŠ è½½
- æ—¥å¿—è®°å½•
- æ¸¸æˆäº‹ä»¶æ—¥å¿—

---

## ğŸ”— æ¨¡å—ä¾èµ–å…³ç³»

```
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚   main.py   â”‚
                        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                             â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚    utils     â”‚           â”‚      core       â”‚
         â”‚   (config    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  (game_engine)  â”‚
         â”‚   logger)    â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚                 â”‚
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚    agents    â”‚  â”‚   database   â”‚
                            â”‚ (AI Player)  â”‚  â”‚  (Storage)   â”‚
                            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                             â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
            â”‚     web      â”‚              â”‚    video     â”‚
            â”‚  (FastAPI)   â”‚              â”‚  (Generate)  â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ æ–‡ä»¶ç”¨é€”å¿«é€Ÿç´¢å¼•

### ğŸš€ å¯åŠ¨è¿è¡Œ

| æ–‡ä»¶ | å‘½ä»¤ | ç”¨é€” |
|------|------|------|
| main.py | `python main.py` | ä¸»ç¨‹åºå…¥å£ï¼ˆå¾…å®ç°ï¼‰ |
| main.py | `python main.py --mode web` | WebæœåŠ¡æ¨¡å¼ï¼ˆå¾…å®ç°ï¼‰ |
| main.py | `python main.py --help` | æŸ¥çœ‹å¸®åŠ© |

### ğŸ“– æ–‡æ¡£é˜…è¯»

| æ–‡ä»¶ | å†…å®¹ | é€‚åˆäººç¾¤ |
|------|------|---------|
| README.md | é¡¹ç›®æ¦‚è¿° | æ‰€æœ‰äºº |
| ARCHITECTURE.md | æ¶æ„è®¾è®¡ | å¼€å‘è€… |
| PROJECT_STRUCTURE.md | é¡¹ç›®ç»“æ„ | å¼€å‘è€… |

### ğŸ”§ é…ç½®æ–‡ä»¶

| æ–‡ä»¶ | å†…å®¹ | ä¿®æ”¹é¢‘ç‡ |
|------|------|---------|
| .env | APIå¯†é’¥ | ä½ |
| requirements.txt | Pythonä¾èµ– | ä¸­ |
| config/default.json | é»˜è®¤é…ç½® | ä½ |

### ğŸ§ª å¼€å‘è°ƒè¯•

| ç›®å½•/æ–‡ä»¶ | ç”¨é€” | å¼€å‘/ç”Ÿäº§ |
|----------|------|----------|
| tests/ | å•å…ƒæµ‹è¯• | å¼€å‘ |
| data/logs/ | æ—¥å¿—æ–‡ä»¶ | ä¸¤è€… |
| output/ | è¾“å‡ºæ–‡ä»¶ | ç”Ÿäº§ |

---

## ğŸ” æ–‡ä»¶æŸ¥æ‰¾æŒ‡å—

### æˆ‘æƒ³...

#### ä¿®æ”¹æ¸¸æˆè§„åˆ™
â†’ `src/core/game_engine.py`

#### è°ƒæ•´AIè¡Œä¸º
â†’ `src/agents/langchain_agent.py`

#### æ·»åŠ æ–°è§’è‰²
â†’ `src/core/models.py` (Roleæšä¸¾)

#### æ›´æ”¹LLMé…ç½®
â†’ `.env` æˆ– `src/utils/config.py`

#### æ·»åŠ APIç«¯ç‚¹
â†’ `src/web/api.py`

#### è‡ªå®šä¹‰è§†é¢‘ç‰¹æ•ˆ
â†’ `src/video/effects.py`

#### ä¿®æ”¹æ•°æ®åº“
â†’ `src/database/` ä¸‹çš„å¯¹åº”æ–‡ä»¶

#### æŸ¥çœ‹æ¸¸æˆè®°å½•
â†’ `data/games/` ç›®å½•

#### æŸ¥çœ‹æ—¥å¿—
â†’ `data/logs/` ç›®å½•

---

## ğŸ“¦ æ•°æ®æ–‡ä»¶ä½ç½®

### è¿è¡Œæ—¶ç”Ÿæˆçš„æ–‡ä»¶

```
data/
â”œâ”€â”€ games/              # æ¸¸æˆçŠ¶æ€JSON
â”‚   â””â”€â”€ {game_id}.json
â”œâ”€â”€ replays/            # æ¸¸æˆå›æ”¾
â”‚   â””â”€â”€ {game_id}.json
â”œâ”€â”€ logs/               # è¿è¡Œæ—¥å¿—
â”‚   â””â”€â”€ werewolf_YYYYMMDD.log
â”œâ”€â”€ cache/              # ç¼“å­˜æ•°æ®
â”‚   â””â”€â”€ llm_response_*
â””â”€â”€ vector_db/          # å‘é‡æ•°æ®
    â””â”€â”€ game_*_player_*_memory.json
```

### è¾“å‡ºæ–‡ä»¶

```
output/
â”œâ”€â”€ videos/             # ç”Ÿæˆçš„è§†é¢‘
â”‚   â”œâ”€â”€ game_{id}.mp4
â”‚   â””â”€â”€ game_{id}_highlights.mp4
â””â”€â”€ screenshots/        # æˆªå›¾
    â””â”€â”€ game_{id}_*.png
```

---

## ğŸ¨ èµ„æºæ–‡ä»¶

```
assets/
â”œâ”€â”€ images/             # å›¾ç‰‡èµ„æº
â”‚   â”œâ”€â”€ roles/          # è§’è‰²å¤´åƒ
â”‚   â”œâ”€â”€ backgrounds/    # èƒŒæ™¯å›¾
â”‚   â””â”€â”€ icons/          # å›¾æ ‡
â”œâ”€â”€ audio/              # éŸ³é¢‘èµ„æº
â”‚   â”œâ”€â”€ bgm/            # èƒŒæ™¯éŸ³ä¹
â”‚   â”œâ”€â”€ effects/        # éŸ³æ•ˆ
â”‚   â””â”€â”€ voices/         # è¯­éŸ³
â””â”€â”€ effects/            # ç‰¹æ•ˆèµ„æº
    â”œâ”€â”€ particles/      # ç²’å­æ•ˆæœ
    â””â”€â”€ animations/     # åŠ¨ç”»
```

---

## ğŸ” æ•æ„Ÿæ–‡ä»¶ï¼ˆä¸æäº¤ï¼‰

ä»¥ä¸‹æ–‡ä»¶ä¸åº”æäº¤åˆ°Gitï¼š

- `.env` - APIå¯†é’¥å’Œé…ç½®
- `data/` - è¿è¡Œæ—¶æ•°æ®
- `output/` - ç”Ÿæˆçš„æ–‡ä»¶
- `__pycache__/` - Pythonç¼“å­˜
- `*.log` - æ—¥å¿—æ–‡ä»¶

æŸ¥çœ‹å®Œæ•´åˆ—è¡¨ï¼š`.gitignore`

---

## ğŸ“ å­¦ä¹ è·¯å¾„

### åˆå­¦è€…
1. é˜…è¯» `README.md`
2. æŸ¥çœ‹äº§å“è®¾è®¡æ–‡æ¡£
3. äº†è§£ç‹¼äººæ€è§„åˆ™
4. æ¢ç´¢é¡¹ç›®ç»“æ„

### å¼€å‘è€…
1. é˜…è¯» `ARCHITECTURE.md`
2. äº†è§£æ¨¡å—ä¾èµ–å…³ç³»
3. ç ”ç©¶æ•°æ®æ¨¡å‹è®¾è®¡
4. å­¦ä¹ Agentæ¶æ„

### æ¶æ„å¸ˆ
1. åˆ†ææ•´ä½“æ¶æ„è®¾è®¡
2. è¯„ä¼°æ¨¡å—ä¾èµ–å…³ç³»
3. ç ”ç©¶æ‰©å±•ç‚¹
4. è§„åˆ’æŠ€æœ¯æ–¹æ¡ˆ

---

**é¡¹ç›®**: AI Werewolf  
**æ–‡æ¡£**: é¡¹ç›®ç»“æ„è¯´æ˜
